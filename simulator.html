<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>10連ガシャシミュレーター</title>
</head>

<body>
    <h1>10連ガシャシミュレーター</h1>
    <p>
        <strong>最上位レアリティ</strong>
        <input type="radio" id="top1" name="top" value="SSR">SSR
        <input type="radio" id="top2" name="top" value="PR">PR
        <input type="radio" id="top3" name="top" value="UR">UR
        <strong>確率:</strong>
        <input type="number" min="0" max="100" step="0.1" id="rate01" value="0">％
        <strong id="tselection"></strong>
    </p>
    <p>
        <strong>中位レアリティ</strong>
        <input type="radio" id="moderate1" name="moderate" value="SSR">SSR
        <input type="radio" id="moderate2" name="moderate" value="SR">SR
        <strong>確率：</strong>
        <input type="number" min="0" max="100" step="0.1" id="rate02" value="0">％
        <strong id="mselection"></strong>
    </p>
    <p>
        <strong>下位レアリティ</strong>
        <input type="radio" id="low" name="low" value="R">R
        <strong>確率：</strong>
        <strong id="rate03">100</strong>％
        <strong id="lselection"></strong>
    </p>
    <p>
        <input type="button" id="getresult" value="ガシャる！">
        <input type="button" id="reset" value="リセット">
    </p>
    <h2>ガシャ結果</h2>
    <p id="gresult"></p>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        //　確率計算の関数
        $(function(){
            $("input").focusout(function(){
                var num01 = $("#rate01").val();
                var num02 = $("#rate02").val();
                var num03 = 100 - num01 - num02;
                $("#rate03").text(num03);
            });
        });
        // ラジオボタンの関数
        $(function(){
            $("#top1").click(function(){
                var tvalue = $("input[name='top']:checked").val();
                var tselection = tvalue + "だよ";
                $("#tselection").text(tselection);
            });
            $("#top2").click(function(){
                var tvalue = $("input[name='top']:checked").val();
                var tselection = tvalue + "だよ";
                $("#tselection").text(tselection);
            });
            $("#top3").click(function(){
                var tvalue = $("input[name='top']:checked").val();
                var tselection = tvalue + "だよ";
                $("#tselection").text(tselection);
            });
            $("#moderate1").click(function(){
                var mvalue = $("input[name='moderate']:checked").val();
                var mselection = mvalue + "だよ";
                $("#mselection").text(mselection);
            });
            $("#moderate2").click(function(){
                var mvalue = $("input[name='moderate']:checked").val();
                var mselection = mvalue + "だよ";
                $("#mselection").text(mselection);
            });
            $("#low").click(function(){
                var lvalue = $("input[name='low']:checked").val();
                var lselection = lvalue + "だよ";
                $("#lselection").text(lselection);
            });
        });
        //　ガシャ結果の関数
        $(function(){
            $("#getresult").click(function(){
                $("#gresult").text("");
                var tvalue = $("input[name='top']:checked").val();
                var mvalue = $("input[name='moderate']:checked").val();
                var lvalue = $("input[name='low']:checked").val();
                var num01 = $("#rate01").val();
                var num02 = $("#rate02").val();
                var num03 = 100 - num01 - num02;
                num01 = parseInt(num01);
                num02 = parseInt(num02);
                var num04 = num01 + num02;
                for(var i = 0; i < 10; i++){
                    var rate = Math.random() * 100;
                    if(rate <= num01){
                        var result = tvalue;
                    }
                    else if(rate <= num04){
                        var result = mvalue;
                    }
                    else{
                        var result = lvalue;
                    }
                    $("#gresult").append(result + "<br>");
                }
            });
        });
        //　リセットボタンの関数
        $(function(){
            $("#reset").click(function(){
                $("#gresult").text("");
            });
        });
    </script>
</body>

</html>